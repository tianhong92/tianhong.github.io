---
title: 数据库切库分库分表
date: 2018-10-09 11:15:41
tags:
---

# 数据库瓶颈
单个库数据量太大（1T到2T）：  多个库
单个数据库服务器压力过大, 读写瓶颈：  多个库
单个表数据量过： 分表

# 数据库切库
切库的的实际应用： 读写分离
主库主要负责数据更新和实时数据查找
从库负责非实时数据的查找

目前的方式：
* 动态数据源切换： 通过注解， spring AOP
* 数据库支持多数据源： 代码实现

# 数据库分表
## 横向分表
比如股票数据表， 分为100张表， 按股票id取余的方式选择存储表
## 纵向分表
最好冷热数据分到不同的表中
可以使用mybatis分表插件shardbatis2.0





